<md-dialog class="md-dialog-fullscreen newAnnoModal" ng-cloak>
    <md-toolbar class="md-toolbar teapot-tb-secondary">
        <div class="md-toolbar-tools">
            <h2>
          <span>Nuova annotazione</span>
        </h2>
        </div>
    </md-toolbar>
    <md-dialog-content class="newAnno-content" layout-padding>

        <form layout="column" ng-submit="dialog.submit()">
            <!-- select -->

            <md-input-container flex="100">
                <label>Tipo di annotazione</label>
                <md-select ng-model="dialog.typeSelected">
                    <md-option value="hasTitle">Titolo</md-option>
                    <md-option value="hasAuthor">Autore</md-option>
                    <md-option value="hasPublicationYear">Anno di pubblicazione</md-option>
                    <md-option value="hasDOI">DOI</md-option>
                    <md-option value="hasURL">URL</md-option>
                    <md-option value="hasComment">Commento</md-option>
                    <md-option value="denotesRethoric">Retorica</md-option>
                    <md-option value="cites">Citazione</md-option>
                </md-select>
            </md-input-container>

            <!-- form collection -->

            <div layout="column">
                <!--title-->
                <md-input-container ng-show="dialog.showFields('hasTitle')">
                    <label>Titolo del documento</label>
                    <input ng-model="dialog.annotations.hasTitle.title">{{dialog.text}}
                    </input>
                </md-input-container>

                <!--author-->
                <span ng-show="dialog.showFields('hasAuthor')">
                 <md-chips
                      ng-model="dialog.annotations.hasAuthor.authors"
                      md-separator-keys="dialog.keys"
                      placeholder="Autore del documento"
                      secondary-placeholder="Autori, separati da virgola"></md-chips>
                    <br/>
                </span>

                <!--pubYear-->
                <md-input-container ng-show="dialog.showFields('hasPublicationYear')">
                    <label>Anno di pubblicazione</label>
                    <input type="number" ng-model="dialog.annotations.hasPublicationYear.year">
                </md-input-container>

                <!--doi-->
                <md-input-container ng-show="dialog.showFields('hasDOI')">
                    <label>DOI del documento</label>
                    <input ng-model="dialog.annotations.hasDOI.doi">
                </md-input-container>

                <!--url-->
                <md-input-container ng-show="dialog.showFields('hasURL')">
                    <label>URL del documento</label>
                    <input ng-model="dialog.annotations.hasURL.url">
                </md-input-container>

                <!--comment-->
                <div ng-show="dialog.showFields('hasComment')">
                    <span class="newAnno-selected" ng-show="dialog.selectedText">
                        <h3>Testo selezionato:</h3>
                        <p>{{dialog.selectedText}}</p>
                    </span>
                    <md-input-container class="md-block" ng-show="dialog.selectedText">
                        <label>Inserisci un commento</label>
                        <textarea ng-model="dialog.annotations.hasComment.comment" rows="5" md-select-on-focus>
                        </textarea>
                    </md-input-container>
                    <md-content ng-hide="dialog.selectedText">Attenzione: questo tipo di annotazione richiede una selezione
                        testuale.
                    </md-content>
                </div>

                <!--rethoric-->
                <div ng-show="dialog.showFields('denotesRethoric')">
                    <span class="newAnno-selected" ng-show="dialog.selectedText">
                        <h3>Testo selezionato:</h3>
                        <p>{{dialog.selectedText}}</p>
                    </span>
                    <md-input-container>
                        <h3 ng-show="dialog.selectedText">Funzione retorica del frammento selezionato:</h3>
                        <md-radio-group layout="row" ng-show="dialog.fragment" ng-model="dialog.annotations.denotesRethoric.rethoric">
                            <md-radio-button value="sro:Abstract" class="md-primary">Abstract</md-radio-button>
                            <md-radio-button value="deo:Introduction" class="md-primary">Introduction</md-radio-button>
                            <md-radio-button value="deo:Materials" class="md-primary">Materials</md-radio-button>
                            <md-radio-button value="deo:Methods" class="md-primary">Methods</md-radio-button>
                            <md-radio-button value="deo:Results" class="md-primary">Results</md-radio-button>
                            <md-radio-button value="sro:Discussion" class="md-primary">Discussion</md-radio-button>
                            <md-radio-button value="sro:Conclusion" class="md-primary">Conclusion</md-radio-button>
                        </md-radio-group>
                    </md-input-container>
                    <md-content ng-hide="dialog.selectedText">Attenzione: questo tipo di annotazione richiede una selezione
                        testuale.
                    </md-content>
                </div>

                <!--cites-->
                <span ng-show="dialog.showFields('cites')">
                    <span layout="column"  ng-show="dialog.selectedText">
                    <h3>Informazioni sull'articolo citato</h3>
                    <md-input-container>
                        <label>Titolo</label>
                        <input ng-model="dialog.annotations.cites.cited.title"/>
                    </md-input-container>
                 <md-chips
                      ng-model="dialog.annotations.cites.cited.authors"
                      md-separator-keys="dialog.keys"
                      placeholder="Autore del documento"
                      secondary-placeholder="Autori, separati da virgola">
                 </md-chips>
                    <br/>
                    <md-input-container>
                        <label>Anno di pubblicazione</label>
                        <input/ ng-model="dialog.annotations.cites.cited.year">
                    </md-input-container>
                    <md-input-container>
                        <label>DOI</label>
                        <input/ ng-model="dialog.annotations.cites.cited.doi">
                    </md-input-container>
                    <md-input-container>
                        <label>URL</label>
                        <input/ ng-model="dialog.annotations.cites.cited.url">
                    </md-input-container>
                    </span>
                <md-content ng-hide="dialog.selectedText">Attenzione: questo tipo di annotazione richiede una selezione testuale.
                </md-content>
                </span>
            </div>

            <p>
                Autore: {{ dialog.provenance.name}}
                <br>{{dialog.provenance.time | date: medium}}
            </p>

    </md-dialog-content>
    <md-dialog-actions class="newAnnoButtons" layout="row" flex layout-align="end end">
        <hr/>
        <md-button class="md-raised" type="submit">Salva</md-button>
        <md-button class="md-raised" type="reset">Annulla</md-button>
    </md-dialog-actions>

    </form>

</md-dialog>
